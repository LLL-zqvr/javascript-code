<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>避免禁选授课时间冲突</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        table,
    table td,
    table th {
        border-collapse: collapse;
    }
    
        table {
            width: 400px;
            text-align: center;
            
        }
    
    table thead {
        background-color: green;
    }
    
    </style>
</head>
<body>
    <table>
        <thead>
           <tr>
                <th>#</th>
                <th>名称</th>
                <th>学分</th>
                <th>起止周</th>
                <th>时间</th>
                <th>教师</th>
                <th>操作</th>
           </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>数据库原理</td>
                <td>3</td>
                <td class="week">1 - 10</td>
                <td class="day">周1/12节</td>
                <td>谭文韬</td>
                <td><input type="checkbox" name="items"></td>
            </tr>
            <tr>
                <td>2</td>
                <td>Web开发技术</td>
                <td>2.5</td>
                <td class="week">1 - 8</td>
                <td class="day">周1/34节</td>
                <td>徐懿</td>
                <td><input type="checkbox" name="items"></td>
            </tr>
            <tr>
                <td>3</td>
                <td>托福阅读</td>
                <td>2</td>
                <td class="week">1 - 5</td>
                <td class="day">周1/12节</td>
                <td>李景阳</td>
                <td><input type="checkbox" name="items"></td>
                </tr>
            <tr>
                <td>4</td>
                <td>高级英语视听</td>
                <td>2</td>
                <td class="week">3 - 10</td>
                <td class="day">周1/34节</td>
                <td>龙超悦</td>
                <td><input type="checkbox" name="items"></td>
                </tr>
            <tr>
                <td>5</td>
                <td>Web系统框架</td>
                <td>2.5</td>
                <td class="week">10 - 17</td>
                <td class="day">周1/12节</td>
                <td>王子阳</td>
                <td><input type="checkbox" name="items"></td>
                </tr>
    <p></p>
<script src="https://cdn.staticfile.net/jquery/1.10.2/jquery.min.js"></script>
<script>
    $(document).ready(
        () => {
            let clickboxs = $("input[name=items]");
            clickboxs.click(
                function() {
                    function beginWeek(clickbox){
                        return $(clickbox).parent().siblings(".week").text().split(' - ')[0];
                    }
                    function endWeek(clickbox){
                        return $(clickbox).parent().siblings(".week").text().split(' - ')[1];
                    }
                    
                    function day(clickbox){
                        return $(clickbox).parent().siblings(".day").text()[1];
                    }
                    function firstClass(clickbox){
                        return $(clickbox).parent().siblings(".day").text()[3];
                    }
                    function secondClass(clickbox){
                        return $(clickbox).parent().siblings(".day").text()[4];
                    }
                    
                    //分割字符串,得到选中课程的起始周和结束周。
                    let begin = beginWeek(this);
                    let end = endWeek(this);
                    //得到选中课程的上课时间（第几天上课）和上课节数
                    let theday = day(this);
                    let first = firstClass(this);
                    let second = secondClass(this);
                    
                    
                    //未选中的课程
                    // let otherweek = $(other).parent().siblings(".week").text();
                    // //分割字符串,得到未选中课程的起始周和结束周。
                    // let otherbeginWeek = otherweek.split(' - ')[0];
                    // let otherendweek = otherweek.split(' - ')[1];
                    // //得到未选中课程的上课时间（第几天上课）和上课节数
                    
                    console.log(begin+" " +end+" "+theday+" "+first+" "+second);
                    //周有重叠时，上课时间，上课节数也重叠
                    //clickboxs.not(":checked").prop("disabled",true);
                    // clickboxs.not(":checked")
                    // .filter(other => {(beginWeek(other)>=begin&&beginWeek(other)<=end)||(endWeek(other)>=begin&&endWeek(other)<=end)})
                    // .filter(other => {day(other)==theday})
                    // .filter(other => {firstclass(other)==firstclass})
                    // .prop("disabled",true);

                    clickboxs.not(":checked")
                    .filter(other => {day(other)==theday;console.log(other)})
                    .prop("disabled",true);


                }
            );
        }
    );
</script>
        </tbody>
    </table>
</body>
</html>