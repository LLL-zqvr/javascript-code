<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>传入数字千分位加逗号并返回</title>

</head>
<body>
    <input type="text">
    <p></p>
    <button>点我得到返回后的数</button>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
        $(document).ready(
            () =>{
                
            $("button").click(
                () =>{
                    let num =  $("input").val().split("");
                    console.log(num);
                    //用flag2判断是不是负数
                    let flag2=0;
                    if(num[0]=='-')
                    flag2=1;
                    //用flag1判断是不是小数
                    let flag1=0;
                    
                    for(let i=0;i<num.length;i++){
                        if(num[i]=='.')
                        {flag1 = 1;
                        break;}
                    }
                    

                    let integer;
                    let decimals;
                    if(flag1==1)
                    //得到一个数的整数部分
                
                    {
                    integer = $("input").val().split(".")[0];
                    //得到一个数的小数部分
                    decimals = "." + $("input").val().split(".")[1];
                    }
                    else{
                    integer = $("input").val();
                 decimals = "";
                    }
                    //console.log(integer);
                    //得到反转数组
                    let numbers;
                    //不是负数直接反转
                    if(flag2==0)
                     numbers = integer.split("").reverse();
                    //是负数则去掉负号再反转
                    
                    if(flag2==1)
                    
                    numbers =integer.split("").splice(1).reverse();
                    console.log(integer);
                    
                    //console.log(integer);
                    console.log(numbers);
                    let count = 0;
                    let p = 0;
                    let result = [];
                    for(let i=0;i<numbers.length;i++){
                            count++;
                            if(count==3&&i!=numbers.length-1){
                                result[p++]=numbers[i];
                                result[p++]=",";
                                count=0;
                            }
                            else
                            result[p++]=numbers[i];
                    }
                    
                    let last =(result.reverse()).join("") ;
                    if(flag2==0)
                    last = last+decimals;
                if(flag2==1)
                last = "-"+last+decimals;
                    $("p").text(last);
                }
            )
            }
        )
    </script>
</body>
</html>